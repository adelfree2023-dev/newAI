---
name: server-management
description: ูุฌููุนุฉ ุจุฑูุชููููุงุช ูุฅุฏุงุฑุฉ ุงูุณูุฑูุฑุ ูุงุนุฏุฉ ุงูุจูุงูุงุชุ ูุงูุชุนุงูู ูุน ุฃุฎุทุงุก ุงูุชุดุบูู ูู ุจูุฆุฉ ุงูุฅูุชุงุฌ.
---

# ๐๏ธ ููุงุฑุฉ ุฅุฏุงุฑุฉ ุงูุณูุฑูุฑ (Server Management Skill)

ูุฐู ุงูููุงุฑุฉ ุชูุฏู ูุถูุงู ุงุณุชูุฑุงุฑ ุงููุธุงู (Stability) ูุชุฌูุจ "ุงูุชุฎููู" ุฃุซูุงุก ุงูุชุนุงูู ูุน ุงูุณูุฑูุฑ.

## ๐ ููุซุงู ุงูุนูู (The Protocol)

### 1. ุงูุชุนุงูู ูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช (PostgreSQL)
- **ุงููุงุนุฏุฉ ุงูุฐูุจูุฉ**: ูุง ุชูุฑุถ ูููุฉ ูุฑูุฑ ุฌุฏูุฏุฉ ูุจู ุงูุชุฃูุฏ ูู ุงุณู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุงููุณุชุฎุฏู.
- **ุงูุชุญูู**: ุงุณุชุฎุฏู ุฏุงุฆูุงู `SELECT datname FROM pg_database;` ู `SELECT rolname FROM pg_roles;`.
- **ุงูุชุบููุฑ**: ูุชู ุชุบููุฑ ุงูุจุงุณูุฑุฏ ุนุจุฑ ููู SQL ูุคูุช ููุฑูุน ุฏุงุฎู ุงูุญุงููุฉ (Docker Container) ูุชุฌูุจ ุฃุฎุทุงุก Shell Quoting.

### 2. ุฅุฏุงุฑุฉ PM2 ู NestJS
- **ุงููููุฐ (Port)**: ูู ุจูุฆุฉ Linuxุ ุงูููุงูุฐ ุฃูู ูู 1024 ุชุชุทูุจ ุตูุงุญูุงุช Root. ุงุณุชุฎุฏู ุฏุงุฆูุงู ุงููููุฐ `3000` ุฃู ุฃุนูู ููุฎุฏูุงุช ุงูุนุงุฏูุฉ.
- **ุชุญุฏูุซ ุงูุจูุฆุฉ**: ูุง ุชุณุชุฎุฏู `pm2 restart` ูุญุฏูุ ุงุณุชุฎุฏู ุฏุงุฆูุงู `pm2 restart APP_NAME --update-env` ูุถูุงู ูุฑุงุกุฉ ุงูุชุบููุฑุงุช ูู ูููุงุช `.env`.

### 3. ุทูุจุงุช ุงูู API (JSON-Safe Protocol)
- **ุงููุงุนุฏุฉ**: ูุชุฌูุจ ุฃุฎุทุงุก ุงูุฑููุฒ (`"`, `'`) ูู ุงูู JSONุ ุงุณุชุฎุฏู ุฏุงุฆูุงู ุตูุบุฉ `bash` ูุชุนุฏุฏุฉ ุงูุฃุณุทุฑ ูุน ุงูู SSH.
- **ุงูููุท**:
  ```bash
  ssh MyServer "bash -c \"curl -s -X POST http://localhost:3000/api/tenants \\
  -H 'Content-Type: application/json' \\
  -d '{\\\"id\\\": \\\"tenant-id\\\", \\\"name\\\": \\\"Tenant Name\\\"}'\""
  ```
  *ุฃู ุงุณุชุฏุนุงุก ููู bash ูุคูุช ุฅุฐุง ูุงู ุงูู JSON ุถุฎูุงู.*

### 4. ุงูุตูุงุญูุงุช (Sudo)
- ุฅุฐุง ูุงุฌูุช `Permission denied` ุฃู `Not in sudoers` ูููุณุชุฎุฏู `newAI`:
  - ูุง ุชุทูุจ ูู ุงููุณุชุญุฏู ุชูููุฐ ุงูุฃูุฑ ูุฏููุงู.
  - ุงุณุชุฎุฏู ููุงุฉ SSH ูุฅุตูุงุญ ุงูุตูุงุญูุงุช (`usermod -aG sudo`) ุฃู ุชูููุฐ ุงูุฃูุฑ ูู `root`.

### 5. ุจุฑูุชูููู ุงูุชุนุงูู ูุน ุงููุดุงูู ุงููุณุชูุฑุฉ
- **ุงููุงุนุฏุฉ**: ุฅุฐุง ูุงุฌูุช ูุดููุฉ ุชูููุฉ (ูุซู ุฎุทุฃ 500 ุฃู ูุดู ุจูุงุก)ุ ุญุงูู ุฅุตูุงุญูุง ุจุญุฏ ุฃูุตู **ูุฑุชูู** (2 attempts).
- **ุงูุฅุฌุฑุงุก ุนูุฏ ุงููุดู**: ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ ุจุนุฏ ุงููุญุงููุฉ ุงูุซุงููุฉุ ุชููู ููุฑุงู ูุฃุฑุณู "ุชูุฑูุฑ ุญุงูุฉ ููุตู" ูููุณุชุฎุฏู ูุชุถูู:
  - ูุง ุงูุฐู ุญุงููุช ูุนูู.
  - ุณุฌูุงุช ุงูุฃุฎุทุงุก ุงูุฏูููุฉ (Error Logs).
  - ุทูุจ ุงูุชูุฌูู ุจุงูุญู ุงูููุชุฑุญ ูู ูุจู ุงููุณุชุฎุฏู.
- **ุงููุฏู**: ุชุฌูุจ ุงูุฏุฎูู ูู ุญููุงุช ุฅุตูุงุญ ุบูุฑ ูุฌุฏูุฉ ูุถูุงู ุชุฏุฎู ุงููุณุชุฎุฏู ูู ุงูููุช ุงูููุงุณุจ.

## ๐ ุฃูุงูุฑ ุงูุชุญูู ุงูุณุฑูุน (Health Checks)
- ุงูุชุญูู ูู ุงูุงุชุตุงู: `curl -I http://localhost:3000/health`
- ูุญุต ุณุฌูุงุช ุงูุฃุฎุทุงุก: `pm2 logs APP_NAME --lines 50 --raw`
- ูุญุต ุงูููุงูุฐ: `sudo ss -tulpn`

### 6. ุจุฑูุชูููู ุงูุชูููุฐ ุงููููุฑุฏ (Atomic Execution)
- **ุงููุงุนุฏุฉ ุงูุฐูุจูุฉ**: ูููุน ููุนุงู ุจุงุชุงู ุฏูุฌ ุงูุฃูุงูุฑ ุงูุจุฑูุฌูุฉ ูู ุณุทุฑ ูุงุญุฏ ุจุงุณุชุฎุฏุงู `&&` ุฃู `;` ุนูุฏ ุงูุชุนุงูู ูุน ุงูุณูุฑูุฑ ุฃู ุงูุจูุงุก.
- **ุงูุชูููุฐ**: ูุฌุจ ุชูููุฐ ูู ุฎุทูุฉ ูุฃูุฑ ูุณุชูู (Separate Command Call).
  - ุฎุทูุฉ ุงูุฏุฎูู ูููุฌูุฏ: ุฃูุฑ ูุณุชูู. (ุนุดุงู ูุชุฃูุฏ ุฅููุง ูู ุงูููุงู ุงูุตุญ ููููุด ุฎุทุฃ ูู ุงููุณุงุฑ)
  - ุฎุทูุฉ ุงูุญุฐู: ุฃูุฑ ูุณุชูู. (ุนุดุงู ูุชุฃูุฏ ุฅู ุงููููุงุช ุงููุฏููุฉ ุงุชูุณุญุช ูุนูุงู ูุด ูุฌุฑุฏ ุชุฌุงูู ููุฎุทุฃ)
  - ุฎุทูุฉ ุงูุจูุงุก: ุฃูุฑ ูุณุชูู. (ุนุดุงู ูู ูู ุฎุทุฃ ูู ุงูููุฏ ูุธูุฑ ููุฑุงู ููุนุฑู ููุงูู ููู ุจุงูุถุจุท)
  - ุฎุทูุฉ ุงูุชุดุบูู: ุฃูุฑ ูุณุชูู. (ุนุดุงู ูุถูู ุฅู ูู ุดูุก ุฌุงูุฒ ููุนูู ุจููุงุกุฉ)
- **ุงููุฏู**: ุงูุญุตูู ุนูู ุชุบุฐูุฉ ุฑุงุฌุนุฉ (Feedback) ููุฑูุฉ ูุฏูููุฉ ููู ูุฑุญูุฉุ ูุชุฌูุจ "ุชุฑุงูู ุงูุฃุฎุทุงุก" (Cascading Errors) ุงูุฐู ูุฎูู ุงูุณุจุจ ุงูุญูููู ูููุดู.

C:\Users\Dell\Desktop\52\doc\protocol.txt
ุจุฑูุชูููู ุงูุดุงุก ุงููููุงุช 

C:\Users\Dell\Desktop\52\doc\SERVER_INFO.md

ูุนูููุงุช ูุงูุฉ ุฌุฏุง ุนู ุงูุณูุฑูุฑ 

---
*ูุฐู ุงูููุงุฑุฉ ุชุถูู ุนุฏู ุชูุฑุงุฑ ุงูุฃุฎุทุงุก ุงูุชูููุฉ ุงูุชู ุญุฏุซุช ูุชููุฑ "ููุฏ ูุธูู" ูุณูุฑูุฑ ูุณุชูุฑุ ููู ูุณููุฉ ุชุนููููุฉ ูููู ููููุฉ ุฅุฏุงุฑุฉ ุงูุฃูุธูุฉ ุงูุถุฎูุฉ.*
